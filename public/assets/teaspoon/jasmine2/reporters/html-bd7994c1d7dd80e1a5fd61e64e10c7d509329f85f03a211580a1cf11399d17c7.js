(function(){Teaspoon.Reporters.BaseView=function(){function t(){this.elements={},this.build()}return t.prototype.build=function(t){return this.el=this.createEl("li",t)},t.prototype.appendTo=function(t){return t.appendChild(this.el)},t.prototype.append=function(t){return this.el.appendChild(t)},t.prototype.createEl=function(t,e){var s;return null==e&&(e=""),s=document.createElement(t),s.className=e,s},t.prototype.findEl=function(t){var e;return this.elements||(this.elements={}),(e=this.elements)[t]||(e[t]=document.getElementById("teaspoon-"+t))},t.prototype.setText=function(t,e){var s;return s=this.findEl(t),s.innerHTML=e},t.prototype.setHtml=function(t,e,s){var i;return null==s&&(s=!1),i=this.findEl(t),s?i.innerHTML+=e:i.innerHTML=e},t.prototype.setClass=function(t,e){var s;return s=this.findEl(t),s.className=e},t.prototype.htmlSafe=function(t){var e;return e=document.createElement("div"),e.appendChild(document.createTextNode(t)),e.innerHTML},t}()}).call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},s={}.hasOwnProperty;Teaspoon.Reporters.HTML=function(s){function i(){this.changeSuite=t(this.changeSuite,this),this.toggleConfig=t(this.toggleConfig,this),this.reportRunnerResults=t(this.reportRunnerResults,this),this.start=(new Teaspoon.Date).getTime(),this.config={"use-catch":!0,"build-full-report":!1,"display-progress":!0},this.total={exist:0,run:0,passes:0,failures:0,skipped:0},this.views={specs:{},suites:{}},this.filters=[],this.setFilters(),this.readConfig(),i.__super__.constructor.apply(this,arguments)}return e(i,s),i.prototype.build=function(){var t;return this.buildLayout(),this.setText("env-info",this.envInfo()),this.setText("version",Teaspoon.version),this.findEl("toggles").onclick=this.toggleConfig,this.findEl("suites").innerHTML=this.buildSuiteSelect(),null!=(t=this.findEl("suite-select"))&&(t.onchange=this.changeSuite),this.el=this.findEl("report-all"),this.showConfiguration(),this.buildProgress(),this.buildFilters()},i.prototype.reportRunnerStarting=function(t){if(this.total.exist=t.total||0,this.total.exist)return this.setText("stats-duration","...")},i.prototype.reportRunnerResults=function(){if(this.total.run)return this.setText("stats-duration",this.elapsedTime()),this.total.failures||this.setStatus("passed"),this.setText("stats-passes",this.total.passes),this.setText("stats-failures",this.total.failures),this.total.run<this.total.exist&&(this.total.skipped=this.total.exist-this.total.run+this.total.skipped,this.total.run=this.total.exist),this.setText("stats-skipped",this.total.skipped),this.updateProgress()},i.prototype.reportSuiteStarting=function(){},i.prototype.reportSuiteResults=function(){},i.prototype.reportSpecStarting=function(t){return this.config["build-full-report"]&&(this.reportView=new(Teaspoon.resolveClass("Reporters.HTML.SpecView"))(t,this)),this.specStart=(new Teaspoon.Date).getTime()},i.prototype.reportSpecResults=function(t){return this.total.run+=1,this.updateProgress(),this.updateStatus(t),delete this.reportView},i.prototype.buildLayout=function(){var t;return t=this.createEl("div"),t.id="teaspoon-interface",t.innerHTML=Teaspoon.resolveClass("Reporters.HTML").template(),document.body.appendChild(t)},i.prototype.buildSuiteSelect=function(){var t,e,s,i,o,r,n,p;if(1===Teaspoon.suites.all.length)return"";for(t="",/index\.html$/.test(window.location.pathname)&&(t="/index.html"),i=[],r=Teaspoon.suites.all,e=0,s=r.length;e<s;e++)p=r[e],o=[Teaspoon.root,p].join("/"),n=Teaspoon.suites.active===p?" selected":"",i.push("<option"+n+' value="'+o+t+'">'+p+"</option>");return'<select id="teaspoon-suite-select">'+i.join("")+"</select>"},i.prototype.buildProgress=function(){return this.progress=Teaspoon.Reporters.HTML.ProgressView.create(this.config["display-progress"]),this.progress.appendTo(this.findEl("progress"))},i.prototype.buildFilters=function(){return this.filters.length&&this.setClass("filter","teaspoon-filtered"),this.setHtml("filter-list","<li>"+this.filters.join("</li><li>"),!0)},i.prototype.elapsedTime=function(){return(((new Teaspoon.Date).getTime()-this.start)/1e3).toFixed(3)+"s"},i.prototype.updateStat=function(t,e){if(this.config["display-progress"])return this.setText("stats-"+t,e)},i.prototype.updateStatus=function(t){var e,s,i;return e=(new Teaspoon.Date).getTime()-this.specStart,null!=(s=this.reportView)&&s.updateState(t,e),i=t.result(),"pending"===i.status?this.updateStat("skipped",this.total.skipped+=1):"failed"===i.status?(this.updateStat("failures",this.total.failures+=1),this.config["build-full-report"]||new(Teaspoon.resolveClass("Reporters.HTML.FailureView"))(t).appendTo(this.findEl("report-failures")),this.setStatus("failed")):i.skipped?this.updateStat("skipped",this.total.skipped+=1):this.updateStat("passes",this.total.passes+=1)},i.prototype.updateProgress=function(){return this.progress.update(this.total.exist,this.total.run)},i.prototype.showConfiguration=function(){var t,e,s,i;e=this.config,s=[];for(t in e)i=e[t],s.push(this.setClass(t,i?"active":""));return s},i.prototype.setStatus=function(t){return document.body.className="teaspoon-"+t},i.prototype.setFilters=function(){if(Teaspoon.params.file&&this.filters.push("by file: "+Teaspoon.params.file),Teaspoon.params.grep)return this.filters.push("by match: "+Teaspoon.params.grep)},i.prototype.readConfig=function(){var t;if(t=this.store("teaspoon"))return this.config=t},i.prototype.toggleConfig=function(t){var e,s;if(e=t.target,"button"===e.tagName.toLowerCase())return s=e.getAttribute("id").replace(/^teaspoon-/,""),this.config[s]=!this.config[s],this.store("teaspoon",this.config),Teaspoon.reload()},i.prototype.changeSuite=function(t){var e;return e=t.target.options,window.location.href=e[e.selectedIndex].value},i.prototype.store=function(t,e){var s;return null!=(null!=(s=window.localStorage)?s.setItem:void 0)?this.localstore(t,e):this.cookie(t,e)},i.prototype.cookie=function(t,e){var s,i;return null==e&&(e=void 0),void 0===e?(t=t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1"),i=document.cookie.match(new RegExp("(?:^|;)\\s?"+t+"=(.*?)(?:;|$)","i")),i&&JSON.parse(unescape(i[1]).split(" ")[0])):(s=new Teaspoon.Date,s.setDate(s.getDate()+365),document.cookie=t+"="+escape(JSON.stringify(e))+"; expires="+s.toUTCString()+"; path=/;")},i.prototype.localstore=function(t,e){return null==e&&(e=void 0),void 0===e?JSON.parse(unescape(localStorage.getItem(t))):localStorage.setItem(t,escape(JSON.stringify(e)))},i}(Teaspoon.Reporters.BaseView)}.call(this),function(){var t=function(t,s){function i(){this.constructor=t}for(var o in s)e.call(s,o)&&(t[o]=s[o]);return i.prototype=s.prototype,t.prototype=new i,t.__super__=s.prototype,t},e={}.hasOwnProperty;Teaspoon.Reporters.HTML.FailureView=function(e){function s(t){this.spec=t,s.__super__.constructor.apply(this,arguments)}return t(s,e),s.prototype.build=function(){var t,e,i,o,r;for(s.__super__.build.call(this,"spec"),e='<h1 class="teaspoon-clearfix"><a href="'+this.spec.link+'">'+this.htmlSafe(this.spec.fullDescription)+"</a></h1>",r=this.spec.errors(),i=0,o=r.length;i<o;i++)t=r[i],e+="<div><strong>"+this.htmlSafe(t.message)+"</strong><br/>"+this.htmlSafe(t.stack||"Stack trace unavailable")+"</div>";return this.el.innerHTML=e},s}(Teaspoon.Reporters.BaseView)}.call(this),function(){var t=function(t,s){function i(){this.constructor=t}for(var o in s)e.call(s,o)&&(t[o]=s[o]);return i.prototype=s.prototype,t.prototype=new i,t.__super__=s.prototype,t},e={}.hasOwnProperty;Teaspoon.Reporters.HTML.ProgressView=function(e){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,e),s.create=function(t){return null==t&&(t=!0),t?Teaspoon.Reporters.HTML.RadialProgressView.supported?new Teaspoon.Reporters.HTML.RadialProgressView:new Teaspoon.Reporters.HTML.SimpleProgressView:new Teaspoon.Reporters.HTML.ProgressView},s.prototype.build=function(){return this.el=this.createEl("div","teaspoon-indicator teaspoon-logo")},s.prototype.update=function(){},s}(Teaspoon.Reporters.BaseView)}.call(this),function(){var t=function(t,s){function i(){this.constructor=t}for(var o in s)e.call(s,o)&&(t[o]=s[o]);return i.prototype=s.prototype,t.prototype=new i,t.__super__=s.prototype,t},e={}.hasOwnProperty;Teaspoon.Reporters.HTML.RadialProgressView=function(e){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,e),s.supported=!!document.createElement("canvas").getContext,s.prototype.build=function(){return this.el=this.createEl("div","teaspoon-indicator radial-progress"),this.el.innerHTML='<canvas id="teaspoon-progress-canvas"></canvas>\n<em id="teaspoon-progress-percent">0%</em>'},s.prototype.appendTo=function(){var t,e;s.__super__.appendTo.apply(this,arguments),this.size=80;try{return t=this.findEl("progress-canvas"),t.width=t.height=t.style.width=t.style.height=this.size,this.ctx=t.getContext("2d"),this.ctx.strokeStyle="#fff",this.ctx.lineWidth=1.5}catch(t){e=t}},s.prototype.update=function(t,e){var s,i;if(i=t?Math.ceil(100*e/t):0,this.setHtml("progress-percent",i+"%"),this.ctx)return s=this.size/2,this.ctx.clearRect(0,0,this.size,this.size),this.ctx.beginPath(),this.ctx.arc(s,s,s-1,0,2*Math.PI*(i/100),!1),this.ctx.stroke()},s}(Teaspoon.Reporters.HTML.ProgressView)}.call(this),function(){var t=function(t,s){function i(){this.constructor=t}for(var o in s)e.call(s,o)&&(t[o]=s[o]);return i.prototype=s.prototype,t.prototype=new i,t.__super__=s.prototype,t},e={}.hasOwnProperty;Teaspoon.Reporters.HTML.SimpleProgressView=function(e){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,e),s.prototype.build=function(){return this.el=this.createEl("div","simple-progress"),this.el.innerHTML='<em id="teaspoon-progress-percent">0%</em>\n<span id="teaspoon-progress-span" class="teaspoon-indicator"></span>'},s.prototype.update=function(t,e){var s;return s=t?Math.ceil(100*e/t):0,this.setHtml("progress-percent",s+"%")},s}(Teaspoon.Reporters.HTML.ProgressView)}.call(this),function(){var t=function(t,s){function i(){this.constructor=t}for(var o in s)e.call(s,o)&&(t[o]=s[o]);return i.prototype=s.prototype,t.prototype=new i,t.__super__=s.prototype,t},e={}.hasOwnProperty;Teaspoon.Reporters.HTML.SpecView=function(e){function s(t,e){this.spec=t,this.reporter=e,this.views=this.reporter.views,this.spec.viewId=i+=1,this.views.specs[this.spec.viewId]=this,s.__super__.constructor.apply(this,arguments)}var i;return t(s,e),i=0,s.prototype.build=function(){var t;return t=["spec"],this.spec.pending&&t.push("state-pending"),s.__super__.build.call(this,t.join(" ")),this.el.innerHTML='<a href="'+this.spec.link+'">'+this.htmlSafe(this.spec.description)+"</a>",this.parentView=this.buildParent(),this.parentView.append(this.el)},s.prototype.buildParent=function(){var t,e;return t=this.spec.parent,t?t.viewId?this.views.suites[t.viewId]:(e=new(Teaspoon.resolveClass("Reporters.HTML.SuiteView"))(t,this.reporter),this.views.suites[e.suite.viewId]=e):this.reporter},s.prototype.buildErrors=function(){var t,e,s,i,o,r;for(t=this.createEl("div"),s="",r=this.spec.errors(),i=0,o=r.length;i<o;i++)e=r[i],s+="<strong>"+this.htmlSafe(e.message)+"</strong><br/>"+this.htmlSafe(e.stack||"Stack trace unavailable");return t.innerHTML=s,this.append(t)},s.prototype.updateState=function(t,e){var s;return s=t.result(),this.clearClasses(),"pending"===s.status?this.updatePending(t,e):"failed"===s.status?this.updateFailed(t,e):s.skipped?this.updateDisabled(t,e):this.updatePassed(t,e)},s.prototype.updatePassed=function(t,e){return this.addStatusClass("passed"),e>Teaspoon.slow&&this.addClass("slow"),this.el.innerHTML+="<span>"+e+"ms</span>"},s.prototype.updateFailed=function(){var t;return this.addStatusClass("failed"),this.buildErrors(),"function"==typeof(t=this.parentView).updateState?t.updateState("failed"):void 0},s.prototype.updatePending=function(){return this.addStatusClass("pending")},s.prototype.updateDisabled=function(){},s.prototype.clearClasses=function(){return this.el.className=""},s.prototype.addStatusClass=function(t){return this.addClass("state-"+t)},s.prototype.addClass=function(t){return this.el.className+=" "+t},s}(Teaspoon.Reporters.BaseView)}.call(this),function(){var t=function(t,s){function i(){this.constructor=t}for(var o in s)e.call(s,o)&&(t[o]=s[o]);return i.prototype=s.prototype,t.prototype=new i,t.__super__=s.prototype,t},e={}.hasOwnProperty;Teaspoon.Reporters.HTML.SuiteView=function(e){function s(t,e){this.suite=t,this.reporter=e,this.views=this.reporter.views,this.suite.viewId=i+=1,this.views.suites[this.suite.viewId]=this,this.suite=new(Teaspoon.resolveClass("Suite"))(this.suite),s.__super__.constructor.apply(this,arguments)}var i;return t(s,e),i=0,s.prototype.build=function(){return s.__super__.build.call(this,"suite"),this.el.innerHTML='<h1><a href="'+this.suite.link+'">'+this.htmlSafe(this.suite.description)+"</a></h1>",this.parentView=this.buildParent(),this.parentView.append(this.el)},s.prototype.buildParent=function(){var t,e;return t=this.suite.parent,t?t.viewId?this.views.suites[t.viewId]:(e=new(Teaspoon.resolveClass("Reporters.HTML.SuiteView"))(t,this.reporter),this.views.suites[e.suite.viewId]=e):this.reporter},s.prototype.append=function(t){return this.ol||s.__super__.append.call(this,this.ol=this.createEl("ol")),this.ol.appendChild(t)},s.prototype.updateState=function(t){var e;if("failed"!==this.state)return this.el.className=this.el.className.replace(/\s?state-\w+/,"")+" state-"+t,"function"==typeof(e=this.parentView).updateState&&e.updateState(t),this.state=t},s}(Teaspoon.Reporters.BaseView)}.call(this),function(){Teaspoon.Reporters.HTML.template=function(){return'<div class="teaspoon-clearfix">\n  <div id="teaspoon-title">\n    <h1><a href="'+Teaspoon.root+'" id="teaspoon-root-link">Teaspoon</a></h1>\n    <ul>\n      <li>version: <b id="teaspoon-version"></b></li>\n      <li id="teaspoon-env-info"></li>\n    </ul>\n  </div>\n  <div id="teaspoon-progress"></div>\n  <ul id="teaspoon-stats">\n    <li>passes: <b id="teaspoon-stats-passes">0</b></li>\n    <li>failures: <b id="teaspoon-stats-failures">0</b></li>\n    <li>skipped: <b id="teaspoon-stats-skipped">0</b></li>\n    <li>duration: <b id="teaspoon-stats-duration">&infin;</b></li>\n  </ul>\n</div>\n\n<div id="teaspoon-controls" class="teaspoon-clearfix">\n  <div id="teaspoon-toggles">\n    <button id="teaspoon-use-catch" title="Toggle using try/catch wrappers when possible">Try/Catch</button>\n    <button id="teaspoon-build-full-report" title="Toggle building the full report">Full Report</button>\n    <button id="teaspoon-display-progress" title="Toggle displaying progress as tests run">Progress</button>\n  </div>\n  <div id="teaspoon-suites"></div>\n</div>\n\n<hr/>\n\n<div id="teaspoon-filter">\n  <h1>Applied Filters [<a href="'+window.location.pathname+'" id="teaspoon-filter-clear">remove</a>]</h1>\n  <ul id="teaspoon-filter-list"></ul>\n</div>\n\n<div id="teaspoon-report">\n  <ol id="teaspoon-report-failures"></ol>\n  <ol id="teaspoon-report-all"></ol>\n</div>'}}.call(this),function(){var t=function(t,s){function i(){this.constructor=t}for(var o in s)e.call(s,o)&&(t[o]=s[o]);return i.prototype=s.prototype,t.prototype=new i,t.__super__=s.prototype,t},e={}.hasOwnProperty;Teaspoon.Jasmine2.Reporters.HTML=function(e){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,e),s.prototype.readConfig=function(){return s.__super__.readConfig.apply(this,arguments),jasmine.getEnv().catchExceptions(this.config["use-catch"])},s.prototype.envInfo=function(){return"jasmine "+jasmine.version},s}(Teaspoon.Reporters.HTML)}.call(this);