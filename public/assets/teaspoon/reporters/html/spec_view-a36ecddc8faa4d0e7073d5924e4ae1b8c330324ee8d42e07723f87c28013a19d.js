(function(){Teaspoon.Reporters.BaseView=function(){function t(){this.elements={},this.build()}return t.prototype.build=function(t){return this.el=this.createEl("li",t)},t.prototype.appendTo=function(t){return t.appendChild(this.el)},t.prototype.append=function(t){return this.el.appendChild(t)},t.prototype.createEl=function(t,e){var s;return null==e&&(e=""),s=document.createElement(t),s.className=e,s},t.prototype.findEl=function(t){var e;return this.elements||(this.elements={}),(e=this.elements)[t]||(e[t]=document.getElementById("teaspoon-"+t))},t.prototype.setText=function(t,e){var s;return s=this.findEl(t),s.innerHTML=e},t.prototype.setHtml=function(t,e,s){var n;return null==s&&(s=!1),n=this.findEl(t),s?n.innerHTML+=e:n.innerHTML=e},t.prototype.setClass=function(t,e){var s;return s=this.findEl(t),s.className=e},t.prototype.htmlSafe=function(t){var e;return e=document.createElement("div"),e.appendChild(document.createTextNode(t)),e.innerHTML},t}()}).call(this),function(){var t=function(t,s){function n(){this.constructor=t}for(var i in s)e.call(s,i)&&(t[i]=s[i]);return n.prototype=s.prototype,t.prototype=new n,t.__super__=s.prototype,t},e={}.hasOwnProperty;Teaspoon.Reporters.HTML.SpecView=function(e){function s(t,e){this.spec=t,this.reporter=e,this.views=this.reporter.views,this.spec.viewId=n+=1,this.views.specs[this.spec.viewId]=this,s.__super__.constructor.apply(this,arguments)}var n;return t(s,e),n=0,s.prototype.build=function(){var t;return t=["spec"],this.spec.pending&&t.push("state-pending"),s.__super__.build.call(this,t.join(" ")),this.el.innerHTML='<a href="'+this.spec.link+'">'+this.htmlSafe(this.spec.description)+"</a>",this.parentView=this.buildParent(),this.parentView.append(this.el)},s.prototype.buildParent=function(){var t,e;return t=this.spec.parent,t?t.viewId?this.views.suites[t.viewId]:(e=new(Teaspoon.resolveClass("Reporters.HTML.SuiteView"))(t,this.reporter),this.views.suites[e.suite.viewId]=e):this.reporter},s.prototype.buildErrors=function(){var t,e,s,n,i,r;for(t=this.createEl("div"),s="",r=this.spec.errors(),n=0,i=r.length;n<i;n++)e=r[n],s+="<strong>"+this.htmlSafe(e.message)+"</strong><br/>"+this.htmlSafe(e.stack||"Stack trace unavailable");return t.innerHTML=s,this.append(t)},s.prototype.updateState=function(t,e){var s;return s=t.result(),this.clearClasses(),"pending"===s.status?this.updatePending(t,e):"failed"===s.status?this.updateFailed(t,e):s.skipped?this.updateDisabled(t,e):this.updatePassed(t,e)},s.prototype.updatePassed=function(t,e){return this.addStatusClass("passed"),e>Teaspoon.slow&&this.addClass("slow"),this.el.innerHTML+="<span>"+e+"ms</span>"},s.prototype.updateFailed=function(){var t;return this.addStatusClass("failed"),this.buildErrors(),"function"==typeof(t=this.parentView).updateState?t.updateState("failed"):void 0},s.prototype.updatePending=function(){return this.addStatusClass("pending")},s.prototype.updateDisabled=function(){},s.prototype.clearClasses=function(){return this.el.className=""},s.prototype.addStatusClass=function(t){return this.addClass("state-"+t)},s.prototype.addClass=function(t){return this.el.className+=" "+t},s}(Teaspoon.Reporters.BaseView)}.call(this);